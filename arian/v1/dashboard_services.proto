syntax = "proto3";

package ariand.v1;

import "ariand/v1/dashboard.proto";
import "ariand/v1/account.proto";
import "google/type/date.proto";
import "google/type/money.proto";

option go_package = "ariand/gen/go/ariand/v1;ariandv1";

service DashboardService {
  rpc GetDashboardSummary(GetDashboardSummaryRequest) returns (GetDashboardSummaryResponse);
  rpc GetTrendData(GetTrendDataRequest) returns (GetTrendDataResponse);
  rpc GetMonthlyComparison(GetMonthlyComparisonRequest) returns (GetMonthlyComparisonResponse);
  rpc GetTopCategories(GetTopCategoriesRequest) returns (GetTopCategoriesResponse);
  rpc GetTopMerchants(GetTopMerchantsRequest) returns (GetTopMerchantsResponse);
  rpc GetAccountSummary(GetAccountSummaryRequest) returns (GetAccountSummaryResponse);
  rpc GetAccountBalances(GetAccountBalancesRequest) returns (GetAccountBalancesResponse);
  rpc GetSpendingTrends(GetSpendingTrendsRequest) returns (GetSpendingTrendsResponse);
  rpc GetTotalBalance(GetTotalBalanceRequest) returns (GetTotalBalanceResponse);
  rpc GetTotalDebt(GetTotalDebtRequest) returns (GetTotalDebtResponse);
  rpc GetNetBalance(GetNetBalanceRequest) returns (GetNetBalanceResponse);
}

message GetDashboardSummaryRequest {
  string user_id = 1;
  optional google.type.Date start_date = 2;
  optional google.type.Date end_date = 3;
}

message GetDashboardSummaryResponse {
  DashboardSummary summary = 1;
}

message GetTrendDataRequest {
  string user_id = 1;
  google.type.Date start_date = 2;
  google.type.Date end_date = 3;
  optional int64 account_id = 4;
}

message GetTrendDataResponse {
  repeated TrendPoint trends = 1;
}

message GetMonthlyComparisonRequest {
  string user_id = 1;
  int32 months_back = 2;
  optional int64 account_id = 3;
}

message GetMonthlyComparisonResponse {
  repeated MonthlyComparison comparisons = 1;
}

message GetTopCategoriesRequest {
  string user_id = 1;
  optional google.type.Date start_date = 2;
  optional google.type.Date end_date = 3;
  optional int32 limit = 4;
}

message GetTopCategoriesResponse {
  repeated TopCategory categories = 1;
}

message GetTopMerchantsRequest {
  string user_id = 1;
  optional google.type.Date start_date = 2;
  optional google.type.Date end_date = 3;
  optional int32 limit = 4;
}

message GetTopMerchantsResponse {
  repeated TopMerchant merchants = 1;
}

message GetAccountSummaryRequest {
  string user_id = 1;
  int64 account_id = 2;
  optional google.type.Date start_date = 3;
  optional google.type.Date end_date = 4;
}

message GetAccountSummaryResponse {
  DashboardSummary summary = 1;
  repeated TrendPoint trends = 2;
}

message GetSpendingTrendsRequest {
  string user_id = 1;
  google.type.Date start_date = 2;
  google.type.Date end_date = 3;
  optional int64 category_id = 4;
  optional int64 account_id = 5;
}

message GetSpendingTrendsResponse {
  repeated TrendPoint trends = 1;
}

message GetAccountBalancesRequest {
  string user_id = 1;
}

message GetAccountBalancesResponse {
  repeated AccountBalance balances = 1;
}

message GetTotalBalanceRequest {
  string user_id = 1;
}

message GetTotalBalanceResponse {
  google.type.Money total_balance = 1;
}

message GetTotalDebtRequest {
  string user_id = 1;
}

message GetTotalDebtResponse {
  google.type.Money total_debt = 1;
}

message GetNetBalanceRequest {
  string user_id = 1;
}

message GetNetBalanceResponse {
  google.type.Money net_balance = 1;
}